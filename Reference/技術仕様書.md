---

# 技術仕様書：SOMEBODY SUMMON ME!

## 1. 開発プラットフォーム・アセット

* **Engine:** Unity 6.000.0.58f2 (or later)
* **Render Pipeline:** Universal Render Pipeline (URP)
* **Main Environment:** [Low Poly Mega City](https://assetstore.unity.com/packages/3d/environments/urban/low-poly-mega-city-325049)　※インポートは人間が行う
* **UnityMCP:** [mcp-unity](https://github.com/CoderGamester/mcp-unity/blob/main/README-ja.md)
* **Base Codebase:** 既存の3DアクションRPGテンプレート
* `StatusManager`: ステータス・属性管理
* `DamageSource`: 攻撃判定・ダメージ定義
* `EnemyAI`: ステートマシン・索敵・行動ロジック



## 2. AI共同開発プロトコル

本作は**「ユーザーがコードを書かない」**ことを目標とし、AIエージェント（Antigravity）とUnityMCP、そして人間の三者連携で開発を進行する。

### A. エージェントAI（Antigravity）の役割

* 既存スクリプトの解析および仕様に基づいたリファクタリング。
* 新規機能（蘇生、合体、変換）のロジック実装。
* UnityMCPに対する命令（Scene操作、Object生成など）の発行。

### B. UnityMCP(mcp-unity)の役割

* Scene上のオブジェクト配置、座標調整。
* NavMeshのベイク、コンポーネントのパラメータ一括設定。
* 階層構造の構築（フォルダ整理など）。
* 禁則事項：unityMCPで可能であっても、テスト実行についてはunityMCPで行わないこと。
* テストはHumanToDoにてテスト項目を指示し、人間に行わせること。

### C. 人間と `HumanToDo.md` の運用

UnityMCPが苦手とする「コンポーネントのアタッチ」「Prefabの参照設定」「Inspectorへの手動アサイン」については、AIエージェントが **`HumanToDo.md`** にタスクを書き出し、人間がそれを実行する。
Unity上でのテストは、HumanToDoにてテスト項目を指示し、人間に行わせること。

#### 【HumanToDo.md の記載ルール】

エージェントは、以下の作業が必要な場合に必ずこのファイルへ追記すること：

1. **Script Attachment:** 新規スクリプトをどのGameObjectにアタッチすべきか。
2. **Asset Reference:** Inspector上の `SerializedField` にどのPrefabやScriptableObjectをドラッグ＆ドロップすべきか。
3. **Tag/Layer Setup:** UnityMCPが変更できない場合、手動でのタグ・レイヤー設定依頼。
4. **Complex Manual Tasks:** 物理演算の微調整や、手動でのアニメーターコントローラー設定。

## 3. システム基盤仕様

### 3.1 チーム・属性定義

* `Team.Green`: プレイヤーおよびミニMASK（味方）。
* `Team.BadGuys`: 警察官（敵）。

### 3.2 NPC状態遷移（AI判断用）

既存の `EnemyAI` のステートマシンに対し、以下の状態概念を統合する。

* **Active:** 通常の戦闘・追従状態。
* **Dizzy:** HP 0時の気絶状態（削除不可）。
* **Follow:** プレイヤー追従状態。
* **Wander:** 周囲のランダム移動状態。

---